-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
cRP = {}
Tunnel.bindInterface("vrp_impound",cRP)
vSERVER = Tunnel.getInterface("vrp_impound")
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARI√ÅVEIS
-----------------------------------------------------------------------------------------------------------------------------------------
local timeSeconds = 0
-----------------------------------------------------------------------------------------------------------------------------------------
-- SERVICES
-----------------------------------------------------------------------------------------------------------------------------------------
local services = {
	{ 393.38,-1616.67,29.3 }
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- IMPOUND
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	while true do
		local timeDistance = 500
		local ped = PlayerPedId()
		if not IsPedInAnyVehicle(ped) then
			local coords = GetEntityCoords(ped)
			for k,v in pairs(services) do
				local distance = #(coords - vector3(v[1],v[2],v[3]))
				if distance <= 30 then
					timeDistance = 4
					DrawMarker(23,v[1],v[2],v[3]-1,0,0,0,0,0,0,14.0,14.0,1.0,75,100,160,50,0,0,0,0)
					if IsControlJustPressed(1,38) and timeSeconds <= 0 and distance <= 10 then
						timeSeconds = 2
						vSERVER.checkImpound()
					end
				end
			end
		end
		Citizen.Wait(timeDistance)
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TIMESECONDS
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	while true do
		if timeSeconds > 0 then
			timeSeconds = timeSeconds - 1
		end
		Citizen.Wait(1000)
	end
end)